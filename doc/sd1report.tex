\documentclass[letterpaper,12pt]{article}

\usepackage[margin=1in]{geometry}
\usepackage{tikz}

\usetikzlibrary{shapes.geometric, arrows, fit}

\newcommand{\AxisRotator}[1][rotate=0]{\tikz [x=0.25cm,y=0.60cm,line width=.2ex,-stealth,#1] \draw (0,0) arc (-150:150:1 and 1);}

\begin{document}
\title{EE 4388 Senior Design I\\Semester Report}
\author{Hazen Eckert \and Omar Hasan \and Ryan Marcotte \and Ridhwaan Rahman}
\maketitle
\tableofcontents
\newpage

\section{Abstract}
\noindent This project is focused on the design and implementation of a teleoperated, wheeled mobile robot that is capable of launching a t-shirt projectile. The robot will be holonomic and will consist of a rigid, rectangular chassis and a mounted cannon powered by $\textrm{CO}_2$. A human user will control all robot related tasks, including remotely driving, aiming, and launching the cannon. Both low-level motor controls and high-level coordination of motor speeds will be designed for controlled locomotion. Two on-board microcontrollers will be networked to the operator's computer, and video captured from a robot-mounted camera will be streamed to a heads-up display, which will allow for real-time control and monitoring of the robot. We will demonstrate the constructed chassis design as well as some prototypical control tasks and video streaming.

\section{Introduction}

\subsection{Subject and Purpose}
\noindent Our task was to design a teleoperated, wheeled mobile robot that can launch t-shirts safely at university events. The primary purpose of the robot will be to promote the Erik Jonsson School of Engineering and inspire undergraduates engineering students to gain hands-on experience with university-sponsered engineering projects.

\subsection{Design Objectives}
\noindent The design will meet the following objects:
\begin{itemize}
    \item Operation time \textgreater 10 minutes
    \item Remote Control for up to 50 feet
    \item User Control of Robot Velocities and Cannon Triggering Mechanism
    \item Fire t-shirts between 20 and 150 feet
    \item Send live video stream of the robot's First Person View back to the user
\end{itemize}

\subsection{Design Process}
\noindent We began designing our robot by determining that the drive system would be a 4-wheel omnidirectional drive with a t-shirt launching mechanism attached rigidly to the robot's chassis. Then, a t-shirt launching mechanism was chosen. An electrical system for wirelessly receiving and transmitting commands and controlling the robot's movements and t-shirt launching mechanism was designed. Finally, a software system for handling the robot-user interface was designed. 

\subsection{Final Results}
\noindent We were able to assemble the robot chassis and demonstrate video streaming using a Raspberry Pi and camera module. We also determined and purchased the necessary components for our robot to operate. Finally, we've nearly completed remote control of robot velocities. 

\section{Conceptual and Preliminary Design}

\subsection{Problem Analysis}

\noindent The robot must wirelessly receive and perform velocity and t-shirt launching commands. To perform the commands, the robot must first have a mechanism by which to control its velocity and also a triggering mechanism for the t-shirt launcher. The robot must have a wireless receiver on-board and a camera for first person view streaming. A central controller should coordinate all robot tasks on-board and a power source for both the t-shirt launching mechanism as well as the components dedicated to maneuvering the robot.

\subsection{Decision Analysis}

\noindent Based on the specifications above, the robot will need the following components: Chassis with actuation mechanism for movement, t-shirt launching mechanism, wireless transceiver, microcontroller, battery, and camera. \\

\noindent The chassis itself can be composed of many different components, depending on the type of chassis that is chosen, along with the movement actuation mechanism. For simplicity and consistency we chose a 4-wheel tank-like drive for the robot. Other options, which included leg actuation or 3-wheel drive, would have been overly complicated or outside of our project's aim. There are many options for chassis kits at online vendors that would allow us to focus more on the electrical and software aspects of the project, and so after comparing multiple 4-wheel drive chassis, we decided to go with an AndyMark Mechanum-Wheel Chassis. It gave us enough room to put our cannon and electronics and allowed us omnidirectional drive because of its Mechanum wheels at the cost of efficiency when moving forwards or backwards. \\ 

\noindent For the t-shirt launching mechanism, we decided to buy a cheap, pneumatic t-shirt cannon. Other options include a mechanical throwing mechanism or building the cannon ourselves, but again those options would take too much time away from designing the entire system. After considering our options, we decided to go with a plain, single-shot cannon with a simple mechanical trigger and pressure control at its tank. Based on its current design, we can easily replace the trigger with a solenoid for electronic triggering from the microcontroller and replace the pressure control with electronic pressure control using a pressure sensor as well as a solenoid. \\

\noindent Both the wireless transceiver and microcontroller were chosen by picking the Arduino Yun microcontroller, which has both a atmega microcontroller chip as well as an atheros linux chip that runs openWRT, which allows the microcontroller to act as a router. Other options included Texas Instruments based microcontrollers, but because we wanted simplicity of programming, we went with the arduino. \\

\noindent The battery was chosen based on the expected current draw of the robot during normal operation. The robot will have a 12V, lead-acid battery that will be able to source up to 300A at any time and can source 60A for 10 minutes straight before discharging. Since our motors will draw at least 2A at free current, we expect that once the robot achieves a constant velocity, each motor will draw around 10A. Thus, we expect our battery to give us enough power to allow the robot to operate for at least 10 minutes at a time. \\

\noindent An IP camera is necessary for video streaming. To save money, however, we've chosen a Raspberry Pi microcontroller with a camera module. We decided upon this solution after discovering the many libraries used to implement video streaming with the RPi. Thus the solution is cheaper than most other IP cameras on the market and the RPi will allow us greater control over the camera system and video streaming.

\section{Description of Solution}


\section{System Components}
\begin{figure}[h!]
  \centering
  \tikzstyle{block} = [rectangle, ultra thick, rounded corners, minimum width=2cm, minimum height=1cm,text centered, draw=black]
  \tikzstyle{dcvolt} = [solid, ultra thick, red];
  \tikzstyle{signal} = [solid, ultra thick, ->, >=stealth];

  \begin{tikzpicture}
    %\draw[help lines] (-6, -12) grid (12,1);
    \node (circuitbreaker) [block, align=center] {\textbf{Circuit}\\\textbf{Breaker}};
    \node (boost) [block, align=center, below of=circuitbreaker, xshift=-4cm, yshift=-2cm] {\textbf{Boost}\\\textbf{Converter}};
    \node (buck) [block, align=center, right of=boost, xshift=7cm] {\textbf{Buck}\\\textbf{Converter}};
    \node (mcu) [block, below of=buck, yshift=-1.25cm] {\textbf{MCU}};
    \node (triggersolenoid) [block, align=center, below of=boost, yshift=-3.5cm, xshift=-1.5cm] {\textbf{Trigger}\\\textbf{Solenoid}};
    \node (pressuresolenoid) [block, align=center, right of=triggersolenoid, xshift=2cm] {\textbf{Pressure}\\\textbf{Solenoid}};
    \node (encoders) [block, right of=pressuresolenoid, xshift=2cm] {\textbf{Encoders}};
    \node (pressuresensor) [block, align=center, right of=encoders, xshift=2cm] {\textbf{Pressure}\\\textbf{Sensor}};
    \node (camera) [block, align=center, right of=pressuresensor, xshift=2cm] {\textbf{Camera}\\\textbf{Module}};
    \node (esc) [block, right of=camera, xshift=2cm] {\textbf{ESC}};
    \node (motors) [block, below of=esc, xshift=-4.5cm, yshift=-1cm] {\textbf{Motors}};

    \draw [dcvolt] (circuitbreaker.north) -- +(0,0.5) node[anchor=south] {\textbf{+12V}};
    \draw [dcvolt] (circuitbreaker.south) -- +(0,-0.9) node[anchor=west, yshift=0.5cm] {\textbf{+12V}};
    \draw [dcvolt] (boost.north) -- +(0,1) -| +(4,1) node {};
    \draw [dcvolt] (buck.north) -- +(0,1) -| +(-4,1) node {};
    \draw [dcvolt] (esc.north) -- +(0,5.55) -| +(-5.5,5.55) node {};
    \draw [dcvolt] (buck.south) -- node[anchor=west, yshift=0.2cm] {\textbf{+5V}} (mcu.north);
    \draw [dcvolt] (encoders.north) -- +(0,2.7) -| +(3.5,2.7) node {};
    \draw [dcvolt] (pressuresensor.north) -- +(0,0.2) -| +(-3,0.2) node {};
    \draw [dcvolt] (camera.north) -- +(0,2.65) -| +(-2.5,2.65) node{};
    \draw [dcvolt] (boost.south) -- +(0,-1) node[anchor=west, yshift=0.5cm] {\textbf{+24V}};
    \draw [dcvolt] (triggersolenoid.north) -- +(0,2.4) -| +(1.5,2.4) node {};
    \draw [dcvolt] (pressuresolenoid.north) -- +(0,2.4) -| +(-1.5,2.4) node {};
    \draw [signal] (pressuresensor.east) -- +(0.5,0) -| +(0.5,0.75) -| +(-0.31, 0.75) -- (mcu.295);
    \draw [signal] (mcu.320) -- +(0,-0.8) -| +(3.5,-0.8) -| +(3.5,-1.75) -- (esc.west);
    \draw [signal] (encoders.east) -- +(0.5,0) -| +(0.5,0.95) -| +(2.39,0.95) -- (mcu.south);
    \draw [signal] (mcu.240) -- +(0,-0.6) -| +(-4.8,-0.6) -| +(-4.8,-1.75) -- (pressuresolenoid.east);
    \draw [signal] (mcu.220) -- +(0,-0.4) -| +(-7.4,-0.4) -| +(-7.4,-1.75) -- (triggersolenoid.east);
    \draw [signal] (esc.south) -- +(0,-1.5) -- (motors.east);
    \draw [signal] (motors.west) -- +(-3.5,0) -| (encoders.south);
  \end{tikzpicture}
  \caption{Electrical System Diagram}
  \label{fig:e_system}
\end{figure}

\begin{figure}[h!]
  \centering

  \tikzstyle{block} = [rectangle, ultra thick, rounded corners, minimum width=3cm, minimum height=2cm,text centered, draw=black]
\tikzstyle{container} = [draw, ultra thick, rectangle, rounded corners, dashed, text width=11em, inner sep=3.5em]
  \tikzstyle{arrow} = [thick, ->, ultra thick, >=latex]
  \begin{tikzpicture}[node distance=2cm]
    \node (input) [align=center, xshift=-1cm] {\textbf{User}\\\textbf{Inputs}};
    \node (output) [right of=input, align=center] {\textbf{Video}\\\textbf{Display}};
    \node (computer) [block, yshift=-2cm] {\textbf{Computer}};
    \node (ar9331) [block, right of=computer, xshift=9cm, yshift=-2cm, align=center] {\textbf{Atheros}\\\textbf{AR9331}};
    \node (atmega) [block, below of=ar9331, yshift=-2cm, align=center] {\textbf{Arduino}\\\textbf{ATmega32u4}};
    \node (rpi) [block, right of=computer, above of=ar9331, xshift=-2cm, yshift=2cm] {\textbf{Raspberry Pi}};

    \node (yun) [container, fit=(atmega) (ar9331)] {};
    \node (yun_text) [yshift=-0.3cm] at (yun.north) {\textbf{Yun}};

    \draw [arrow] (computer.336) -- node[anchor=east, align=center, yshift=-5mm] {\textbf{Velocity}\\\textbf{Commands}} (ar9331.188);
    \draw [arrow] (ar9331.172) -- node[anchor=west, align=center, xshift=-12mm, yshift=5mm] {\textbf{Status Updates}} (computer.352);
    \draw [arrow] (ar9331.250) -- node[anchor=east, align=center] {\textbf{GPIO}\\\textbf{Commands}} (atmega.110);
    \draw [arrow] (atmega.70) -- node[anchor=west, align=center] {\textbf{Sensor}\\\textbf{Readings}} (ar9331.290);
    \draw [arrow] (rpi.172) -- node[anchor=east, align=center, yshift=5mm] {\textbf{Video}\\\textbf{Stream}} (computer.24);
    \draw [arrow] (computer.8) -- node[anchor=west, align=center, xshift=-8mm, yshift=-5mm] {\textbf{Video}\\\textbf{Commands}} (rpi.188);
    \draw [arrow] (input) -- (computer.134);
    \draw [arrow] (computer.46) -- (output);
  \end{tikzpicture}
  \caption{System Overview}
  \label{fig:system_diagram}
\end{figure}


\section{Project Implementation and Assessment}
\section{Scope of Work}
\section{Ethics}
\noindent The intent of the t-shirt cannon robot is to aid in the distribution of t-shirt during public events like basketball games and pep rallies in a gym setting. To prevent harm, there will be several precautions that will be taken. Firstly, there will be a hard and soft master kill switch to shut down the robot in case of an emergency. Secondly, the network in which the Raspberry Pi, Arduino Yun, and the laptop are communicating will be password protected, so no one can simply hack into the system. Thirdly, the user who will be manually driving the robot wirelessly will be trained and be monitoring the vehicle in his/her line of sight. Finally, the robot will be decorated so that it will not intimidate or be invisible to the public. 

\section{Cost Estimation}
\section{Project Management Summary}
\section{Conclusion}
\noindent The Teleoperated Mobile Garment Accelerator is designed to promote and bring awareness to the engineering field. The décor and first person vision of the robot will engage the audience in public events.\newline

\noindent In Senior Design II, we will construct a mount to affix the cannon to the chassis. Additionally we will design a reloading mechanism for automatic t-shirt reloading of the cannon. Rigorous testing of the robot’s movement, firing mechanism, and network security will be performed.
\end{document}


