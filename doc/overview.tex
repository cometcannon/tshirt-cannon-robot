\documentclass[letterpaper,12pt]{article}

\usepackage[margin=1.0in]{geometry}
\usepackage{multirow}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows, fit}

\newcommand{\botname}{\textit{The Gans Cannon}}
\newcommand{\specialcell}[2][c]{\begin{tabular}[#1]{@{}c@{}}#2\end{tabular}}
\newcommand{\xxx}[1]{{\color{red}\bf #1}}

\begin{document}

\title{T-Shirt Cannon Software Architecture}
\author{Hazen Eckert \hspace{3mm} Omar Hasan \hspace{3mm} Ryan Marcotte \hspace{3mm} Ridhwaan Rahman}
\date{}
\maketitle

\section{System Overview}

\begin{figure}[h!]
  \centering

  \tikzstyle{block} = [rectangle, rounded corners, minimum width=3cm, minimum height=2cm,text centered, draw=black]
  \tikzstyle{container} = [draw, rectangle, rounded corners, dashed, text width=11em, inner sep=3.5em]
  \tikzstyle{arrow} = [thick, ->, >=latex]
  \begin{tikzpicture}[node distance=2cm]
    \node (input) [align=center, xshift=-1cm] {User\\Inputs};
    \node (output) [right of=input, align=center] {Video\\Display};
    \node (computer) [block, yshift=-2cm] {Computer};
    \node (ar9331) [block, right of=computer, xshift=9cm, yshift=-2cm, align=center] {Atheros\\AR9331};
    \node (atmega) [block, below of=ar9331, yshift=-2cm, align=center] {Arduino\\ATmega32u4};
    \node (rpi) [block, right of=computer, above of=ar9331, xshift=-2cm, yshift=2cm] {Raspberry Pi};

    \node (yun) [container, fit=(atmega) (ar9331)] {};
    \node (yun_text) [yshift=-0.3cm] at (yun.north) {Yun};

    \draw [arrow] (computer.336) -- node[anchor=east, align=center, yshift=-5mm] {Velocity\\Commands} (ar9331.188);
    \draw [arrow] (ar9331.172) -- node[anchor=west, align=center, xshift=-12mm, yshift=5mm] {Status Updates} (computer.352);
    \draw [arrow] (ar9331.240) -- node[anchor=east, align=center] {GPIO\\Commands} (atmega.120);
    \draw [arrow] (atmega.60) -- node[anchor=west, align=center] {Sensor\\Readings} (ar9331.300);
    \draw [arrow] (rpi.172) -- node[anchor=east, align=center, yshift=5mm] {Video\\Stream} (computer.24);
    \draw [arrow] (computer.8) -- node[anchor=west, align=center, xshift=-12mm, yshift=-5mm] {Video Commands} (rpi.188);
    \draw [arrow] (input) -- (computer.134);
    \draw [arrow] (computer.46) -- (output);
  \end{tikzpicture}
  \caption{System Overview}
  \label{fig:system_diagram}
\end{figure}

\subsection{Computer}
\subsection{AR9331}
\subsection{ATmega32u4}
\subsection{Raspberry Pi}

\section{Application Interface Specifications}

\subsection{Message Formats}

\subsubsection{Origin: Computer}

\xxx{Describe the formats of each message type that will be sent from the computer to the robot. The first byte of each message will identify its type and tell how to interpret the rest of the message. If we are going to be using a Pi in addition to the Yun, some message types will actually be addressed to the Yun and others will be addressed to the Pi}

\begin{table}[h!]
  \centering
  \begin{tabular}{| c | c |}
    \hline
    \textbf{Field} & 0 \\
    \hline
    \textbf{Description} & \specialcell{Command\\Type} \\
    \hline
    \textbf{Value} & 0 \\
    \hline
  \end{tabular}
  \caption{Query Command Message Format}
  \label{tab:query_cmd_msg}
\end{table}

\begin{table}[h!]
  \centering
  \begin{tabular}{| c | c | c | c | c |}
    \hline
    \textbf{Field} & 0 & 1 & 2 & 3 \\
    \hline
    \textbf{Description} & \specialcell{Command\\Type} & \specialcell{Linear\\Velocity\\X} & \specialcell{Linear\\Velocity\\Y} & \specialcell{Angular\\Velocity} \\
    \hline
    \textbf{Value} & 1 & -128 to 127 & -128 to 127 & -128 to 127 \\
    \hline
  \end{tabular}
  \caption{Velocity Command Message Format}
  \label{tab:vel_cmd_msg}
\end{table}

\begin{table}[h!]
  \centering
  \begin{tabular}{| c | c |}
    \hline
    \textbf{Field} & 0 \\
    \hline
    \textbf{Description} & \specialcell{Command\\Type} \\
    \hline
    \textbf{Value} & 2 \\
    \hline
  \end{tabular}
  \caption{Fire Command Message Format}
  \label{tab:fire_cmd_msg}
\end{table}

\subsubsection{Origin: AR9331}

\subsubsection{Origin: Raspberry Pi}

\section{Chassis}
\begin{center}
    \includegraphics[width=11cm]{pics/chassis/andymark_chassis.jpg}
\end{center}

\subsection{Overview}
\botname's Chassis is the AndyMark C-Chassis with Mecanum Wheel Drive. This chassis was chosen among others because of its price, modularity, and size. 

\subsection{Assembly}
\subsection{Troubleshooting}
\subsection{References}

\begin{table}[h!]
  \begin{tabular}{| c | c |}
    \hline
    \textbf{AndyMark Frame Assembly} &  http://files.andymark.com/am-0952AssemblyInstructions.pdf\\
    \hline
    \textbf{AndyMark Gearbox Assembly} &  http://files.andymark.com/x2010-toughbox-user-guide.pdf\\
    \hline
  \end{tabular}
  \label{tab:fire_cmd_msg}
\end{table}

\section{T-Shirt Cannon}
\begin{center}
    \includegraphics[width=11cm]{pics/cannon/blowhard_cannon.jpg}
\end{center}

\subsection{Troubleshooting}
\begin{center}
    \includegraphics[width=11cm]{pics/cannon/broken_release_valve.jpg}
\end{center}


\end{document}
